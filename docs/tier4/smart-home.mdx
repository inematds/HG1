---
sidebar_position: 6
title: 6. Smart Home Integration
description: IntegraÃ§Ã£o com dispositivos domÃ©sticos
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# ğŸ  Smart Home Integration

:::tip Objetivo
Integrar o G1 com ecossistemas de casa inteligente (Matter, HomeKit, Google Home, Alexa) para criar automaÃ§Ãµes avanÃ§adas e controlar dispositivos atravÃ©s do robÃ´.
:::

---

## ğŸ¯ VisÃ£o Geral da IntegraÃ§Ã£o

O MindOn transforma o G1 em um **hub fÃ­sico inteligente** que pode interagir com todos os dispositivos da sua casa.

### Protocolos Suportados

```
ECOSSISTEMAS SUPORTADOS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Matter (Universal)
   â””â”€> PadrÃ£o aberto, interoperÃ¡vel
   â””â”€> 500+ dispositivos compatÃ­veis

2. Apple HomeKit
   â””â”€> IntegraÃ§Ã£o nativa com iOS
   â””â”€> Siri Shortcuts

3. Google Home
   â””â”€> Google Assistant integration
   â””â”€> Routines e automaÃ§Ãµes

4. Amazon Alexa
   â””â”€> Skills de terceiros
   â””â”€> Alexa Routines

5. Zigbee / Z-Wave
   â””â”€> Sensores e atuadores legacy
   â””â”€> Adaptador USB necessÃ¡rio
```

### Vantagem do G1 vs Hubs EstÃ¡ticos

```
HUB ESTÃTICO (Echo, HomePod):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ Controla dispositivos remotamente
â€¢ Sem interaÃ§Ã£o fÃ­sica
â€¢ Limitado a comandos de voz


G1 COM MINDON:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… Controla dispositivos remotamente
âœ… InteraÃ§Ã£o fÃ­sica (apertar botÃµes, girar knobs)
âœ… Mobilidade (leva controle remoto para vocÃª)
âœ… Visual feedback (cÃ¢mera verifica estado)
âœ… ResoluÃ§Ã£o de problemas (reinicia roteador)
```

---

## ğŸ”Œ Matter Protocol

### ConfiguraÃ§Ã£o Inicial

<Tabs>
<TabItem value="setup" label="Setup">

**Configurar Matter no G1:**

```python
from mindon_sdk import SmartHomeManager

smarthome = SmartHomeManager()

# Inicializar Matter stack
smarthome.initialize_matter(
    fabric_id="G1_Home_Network",
    vendor_id=0xFFF1,  # Unitree vendor ID
    product_id=0x8001   # G1 product ID
)

# Escanear dispositivos Matter
devices = smarthome.discover_devices(
    protocol="matter",
    timeout=30  # segundos
)

print(f"Encontrados {len(devices)} dispositivos")
for device in devices:
    print(f"- {device.name} ({device.type})")
```

**Output exemplo:**
```
Encontrados 8 dispositivos
- Living Room Light (light_bulb)
- Bedroom Thermostat (thermostat)
- Front Door Lock (smart_lock)
- Kitchen Camera (security_camera)
- Garage Door (door_opener)
```

</TabItem>

<TabItem value="pair" label="Parear">

**Parear dispositivo Matter:**

```python
# MÃ©todo 1: QR Code
device = smarthome.pair_device(
    pairing_code="MT:Y3.K9L16KA0648G00",  # Do QR code
    device_name="Sala - LÃ¢mpada"
)

# MÃ©todo 2: CÃ³digo manual
device = smarthome.pair_device(
    manual_code="34970112332",
    device_name="Quarto - Termostato"
)

# MÃ©todo 3: NFC (G1 aproxima do dispositivo)
device = smarthome.pair_via_nfc(
    device_name="Fechadura Porta"
)

# Verificar pareamento
if device.is_paired():
    print(f"âœ… {device.name} pareado com sucesso!")
    print(f"   Tipo: {device.type}")
    print(f"   Fabricante: {device.manufacturer}")
```

</TabItem>

<TabItem value="control" label="Controlar">

**Controlar dispositivos:**

```python
# Listar dispositivos
devices = smarthome.get_all_devices()

# Pegar dispositivo especÃ­fico
light = smarthome.get_device("Living Room Light")

# Ligar/Desligar
light.turn_on()
light.turn_off()

# Ajustar brilho
light.set_brightness(75)  # 0-100%

# Mudar cor
light.set_color(
    hue=120,        # Verde
    saturation=100,
    brightness=80
)

# Ou usar RGB
light.set_rgb(255, 100, 0)  # Laranja

# Estado atual
state = light.get_state()
print(f"Ligada: {state.on}")
print(f"Brilho: {state.brightness}%")
print(f"Cor: RGB{state.rgb}")
```

</TabItem>
</Tabs>

---

## ğŸ Apple HomeKit Integration

### Configurar HomeKit

```python
from mindon_sdk import HomeKitBridge

homekit = HomeKitBridge()

# Adicionar G1 como HomeKit Hub
homekit.register_g1_as_hub(
    name="G1 Smart Hub",
    pin_code="123-45-678",  # Mostrado no display do G1
    category="bridge"
)

# Expor dispositivos Matter para HomeKit
homekit.bridge_matter_devices(
    devices=smarthome.get_all_devices(),
    auto_sync=True  # Sincronizar mudanÃ§as automaticamente
)

# G1 agora aparece no app Casa do iOS!
```

### Criar AutomaÃ§Ãµes HomeKit

```python
# Via Siri Shortcuts
homekit.create_shortcut(
    name="Boa Noite",
    actions=[
        ("turn_off", "all_lights"),
        ("set_temperature", {"device": "thermostat", "temp": 20}),
        ("lock", "front_door"),
        ("say", "Boa noite! Casa segura.")
    ]
)

# Agora: "Hey Siri, Boa Noite" â†’ G1 executa!

# AutomaÃ§Ã£o baseada em localizaÃ§Ã£o
homekit.create_automation(
    name="Cheguei em Casa",
    trigger={
        "type": "location",
        "event": "arrive_home"
    },
    actions=[
        ("turn_on", "entrance_light"),
        ("unlock", "front_door"),
        ("say", "Bem-vindo!")
    ]
)
```

---

## ğŸŸ¢ Google Home Integration

### Setup Google Assistant

<Tabs>
<TabItem value="link" label="Vincular Conta">

**Vincular Google Account:**

```python
from mindon_sdk import GoogleHomeIntegration

google = GoogleHomeIntegration()

# Iniciar vinculaÃ§Ã£o OAuth
auth_url = google.start_oauth_flow()
print(f"Abra: {auth_url}")

# UsuÃ¡rio autoriza no navegador
# G1 recebe callback automaticamente

# Verificar conexÃ£o
if google.is_connected():
    print("âœ… Conectado ao Google Home")
    devices = google.sync_devices()
    print(f"Sincronizados {len(devices)} dispositivos")
```

</TabItem>

<TabItem value="control-google" label="Controlar via Google">

**Usar Google Assistant:**

```python
# Comandos via Assistant
google.send_command("Ligue as luzes da sala")
google.send_command("Definir termostato para 22 graus")
google.send_command("Tocar mÃºsica na cozinha")

# Criar rotinas Google
google.create_routine(
    name="ManhÃ£ de Trabalho",
    trigger="07:00",
    days=["mon", "tue", "wed", "thu", "fri"],
    actions=[
        "turn_on bedroom_light",
        "set_thermostat 21",
        "start_coffee_maker",
        "play_news_briefing"
    ]
)

# G1 pode ser ativado por rotina Google
google.register_g1_action(
    name="G1 trazer cafÃ©",
    command="fetch_and_bring coffee_mug to bedroom"
)

# Agora no Google Home:
# "Ok Google, bom dia" â†’ Rotina executa + G1 traz cafÃ©!
```

</TabItem>
</Tabs>

---

## ğŸŸ£ Amazon Alexa Integration

### Configurar Alexa Skill

```python
from mindon_sdk import AlexaIntegration

alexa = AlexaIntegration()

# Ativar skill Unitree G1
alexa.enable_skill("unitree-g1-control")

# Descobrir dispositivos
alexa.discover_devices()
# "Alexa encontrou 15 dispositivos"

# Controlar via Alexa
# UsuÃ¡rio: "Alexa, peÃ§a pro G1 trazer Ã¡gua"
# Alexa: "Pedindo ao G1..."
# G1: Executa fetch_and_bring("water bottle")

# Criar rotinas Alexa
alexa.create_routine(
    name="Modo Cinema",
    trigger_phrase="Alexa, modo cinema",
    actions=[
        {"device": "living_room_lights", "action": "dim", "value": 20},
        {"device": "tv", "action": "turn_on"},
        {"device": "g1", "action": "say", "text": "Aproveite o filme!"}
    ]
)
```

---

## ğŸ¬ AutomaÃ§Ãµes AvanÃ§adas

### CenÃ¡rios Inteligentes

<Tabs>
<TabItem value="security" label="SeguranÃ§a">

**Sistema de seguranÃ§a com G1:**

```python
# AutomaÃ§Ã£o: Monitoramento noturno
smarthome.create_automation(
    name="Patrol Noturno",
    trigger={
        "time": "23:00",
        "condition": "all_residents_home"
    },
    actions=[
        # 1. Trancar todas as portas
        {"device": "all_locks", "action": "lock"},

        # 2. Ligar cÃ¢meras
        {"device": "all_cameras", "action": "enable_recording"},

        # 3. G1 faz ronda
        {"device": "g1", "action": "execute_skill", "skill": "patrol_area",
         "params": {"waypoints": ["living_room", "kitchen", "backyard"],
                    "cycles": 3, "alert_on_anomaly": True}},

        # 4. Notificar usuÃ¡rio
        {"action": "send_notification", "message": "Casa segura. Patrulha concluÃ­da."}
    ]
)

# Se G1 detecta anomalia durante patrulha:
@smarthome.on_event("anomaly_detected")
def handle_security_alert(event):
    # Ligar todas as luzes
    smarthome.turn_on_all("lights")

    # Gravar vÃ­deo
    smarthome.start_recording("all_cameras")

    # Alertar usuÃ¡rio
    smarthome.send_alert(
        title="âš ï¸ Alerta de SeguranÃ§a",
        message=f"Anomalia detectada: {event.description}",
        severity="high"
    )
```

</TabItem>

<TabItem value="energy" label="Economia Energia">

**OtimizaÃ§Ã£o energÃ©tica:**

```python
# AutomaÃ§Ã£o inteligente de energia
smarthome.create_automation(
    name="Economizar Energia",
    trigger={
        "condition": "no_one_home",
        "duration": 30  # minutos
    },
    actions=[
        # Desligar luzes desnecessÃ¡rias
        {"device": "all_lights", "action": "turn_off",
         "except": ["security_lights"]},

        # Ajustar termostato
        {"device": "thermostat", "action": "set_eco_mode"},

        # G1 verifica dispositivos esquecidos
        {"device": "g1", "action": "check_forgotten_devices"},

        # G1 desliga aparelhos em standby
        {"device": "g1", "action": "turn_off_standby_devices"}
    ]
)

# G1 aprende padrÃµes de uso
learning = smarthome.get_energy_learning()
recommendations = learning.get_recommendations()

for rec in recommendations:
    print(f"ğŸ’¡ {rec.suggestion}")
    print(f"   Economia estimada: {rec.savings_kwh} kWh/mÃªs")
```

</TabItem>

<TabItem value="presence" label="PresenÃ§a Inteligente">

**SimulaÃ§Ã£o de presenÃ§a (viagens):**

```python
# Ativar modo "Away"
smarthome.enable_away_mode(
    start_date="2025-12-01",
    end_date="2025-12-07"
)

# G1 simula presenÃ§a
simulation_schedule = [
    # ManhÃ£
    {"time": "07:30", "action": "turn_on bedroom_light"},
    {"time": "07:45", "action": "turn_on kitchen_light"},
    {"time": "08:00", "action": "turn_on bathroom_light"},

    # Tarde
    {"time": "18:00", "action": "turn_on living_room_light"},
    {"time": "18:30", "action": "turn_on tv"},

    # Noite
    {"time": "22:00", "action": "turn_off all_lights",
                      "except": ["porch_light"]},

    # G1 varia horÃ¡rios Â±30min para parecer natural
]

smarthome.set_presence_simulation(simulation_schedule)

# G1 tambÃ©m se move pela casa
smarthome.enable_g1_movement_simulation(
    waypoints=["living_room", "kitchen", "bedroom"],
    frequency="hourly"
)
```

</TabItem>
</Tabs>

---

## ğŸ›ï¸ Device Discovery

### Descobrir Novos Dispositivos

```python
# Scan automÃ¡tico periÃ³dico
smarthome.enable_auto_discovery(
    interval=3600,  # A cada 1 hora
    protocols=["matter", "zigbee", "wifi"]
)

# Scan manual
new_devices = smarthome.scan_new_devices(
    timeout=60,
    auto_pair=True,  # Parear automaticamente se possÃ­vel
    notify=True      # Notificar usuÃ¡rio
)

# Se encontrar dispositivo novo:
# G1: "Encontrei novo dispositivo: LÃ¢mpada Phillips Hue.
#      Deseja parear?"
# UsuÃ¡rio: "Sim"
# G1: *executa pareamento* "Pareado! Nome: LÃ¢mpada Quarto HÃ³spedes"
```

---

## ğŸ”§ Device Groups & Scenes

### Criar Grupos

```python
# Agrupar dispositivos
smarthome.create_group(
    name="Sala de Estar",
    devices=[
        "living_room_light_1",
        "living_room_light_2",
        "living_room_lamp",
        "tv"
    ]
)

# Controlar grupo inteiro
smarthome.get_group("Sala de Estar").turn_off()

# Criar cenas
smarthome.create_scene(
    name="Leitura",
    states={
        "living_room_light_1": {"on": True, "brightness": 100},
        "living_room_light_2": {"on": False},
        "living_room_lamp": {"on": True, "brightness": 80, "color_temp": 3000}
    }
)

# Ativar cena
smarthome.activate_scene("Leitura")
# Ou via voz: "Hey G1, ativar cena leitura"
```

---

## ğŸ“Š Monitoramento

### Dashboard de Status

```python
# Ver status de todos os dispositivos
dashboard = smarthome.get_dashboard()

print("Status da Casa:")
print(f"Luzes ligadas: {dashboard.lights_on}/{dashboard.total_lights}")
print(f"Portas trancadas: {dashboard.doors_locked}/{dashboard.total_doors}")
print(f"Temperatura mÃ©dia: {dashboard.avg_temperature}Â°C")
print(f"Consumo energÃ©tico: {dashboard.power_consumption} W")

# HistÃ³rico de eventos
events = smarthome.get_event_history(
    time_range="last_24_hours",
    event_types=["light_switched", "door_opened", "motion_detected"]
)

for event in events:
    print(f"{event.timestamp}: {event.device} - {event.action}")
```

### Alertas e NotificaÃ§Ãµes

```python
# Configurar alertas
smarthome.configure_alerts(
    battery_low_threshold=20,  # %
    connection_lost_timeout=300,  # segundos
    abnormal_power_usage=True
)

# Receber notificaÃ§Ãµes
@smarthome.on_alert("battery_low")
def handle_battery_low(device):
    print(f"âš ï¸ Bateria baixa: {device.name} ({device.battery_level}%)")
    # G1 pode ir trocar bateria se dispositivo for acessÃ­vel

@smarthome.on_alert("device_offline")
def handle_offline(device):
    print(f"âŒ Dispositivo offline: {device.name}")
    # G1 pode ir verificar fisicamente o dispositivo
    skills.execute("check_device_status", {"device": device.name})
```

---

## âœ… Checklist de PrÃ¡tica

- [ ] Pareou 5+ dispositivos Matter/Zigbee
- [ ] Configurou integraÃ§Ã£o HomeKit ou Google Home
- [ ] Criou automaÃ§Ã£o "Bom Dia" (3+ dispositivos)
- [ ] Criou grupo de dispositivos e cena
- [ ] Testou controle via comandos de voz
- [ ] Configurou patrulha de seguranÃ§a noturna
- [ ] Habilitou monitoramento energÃ©tico
- [ ] Criou automaÃ§Ã£o baseada em presenÃ§a

---

## ğŸ› Troubleshooting Comum

| Problema | Causa | SoluÃ§Ã£o |
|----------|-------|---------|
| Dispositivo nÃ£o pareava | Protocolo incompatÃ­vel | Verificar se Ã© Matter/Zigbee compatÃ­vel |
| Comando nÃ£o executa | Dispositivo offline | Verificar conexÃ£o WiFi, reiniciar dispositivo |
| LatÃªncia alta (>2s) | Sobrecarga de rede | Usar WiFi 5GHz, reduzir dispositivos 2.4GHz |
| AutomaÃ§Ã£o nÃ£o dispara | CondiÃ§Ã£o incorreta | Revisar logs: `smarthome.get_automation_logs()` |
| G1 nÃ£o encontra dispositivos | Firewall bloqueando | Permitir mDNS/Bonjour no roteador |
| IntegraÃ§Ã£o HomeKit falhou | PIN incorreto | Resetar: `homekit.reset_pairing()` |

---

## ğŸ”— PrÃ³ximos Passos

:::tip PrÃ³ximo MÃ³dulo
**[ğŸ¤– Multi-Robot Coordination â†’](./multi-robot)**

Coordene mÃºltiplos robÃ´s G1 para tarefas colaborativas.
:::

---

**â±ï¸ Tempo:** 55-75 min | **ğŸ® Hands-on:** Essencial | **ğŸ  Requisito:** 3+ dispositivos smart home
