---
sidebar_position: 5
title: 5. ManipulaÃ§Ã£o com BraÃ§os
description: Uso dos braÃ§os e garras
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# ğŸ¦¾ ManipulaÃ§Ã£o com BraÃ§os

:::tip Objetivo
Dominar o uso dos braÃ§os e garras do Unitree G1 para manipulaÃ§Ã£o precisa de objetos, desde pegar itens simples atÃ© tarefas complexas de coordenaÃ§Ã£o bimanual.
:::

---

## ğŸ¯ Anatomia dos BraÃ§os do G1

O G1 possui **2 braÃ§os de 7 DOF** (7 graus de liberdade cada), permitindo manipulaÃ§Ã£o similar Ã  humana.

### EspecificaÃ§Ãµes TÃ©cnicas

```
BRAÃ‡O G1 (cada):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ DOF Total: 7 (shoulder: 3, elbow: 1, wrist: 3)
â€¢ Alcance: 0.65m da base do ombro
â€¢ Payload: 3 kg por braÃ§o (6 kg bimanual)
â€¢ Velocidade: atÃ© 1.5 m/s (movimento rÃ¡pido)
â€¢ PrecisÃ£o: Â±2mm (posicionamento final)
â€¢ ForÃ§a mÃ¡xima: 50N (garra fechada)
```

### Sistema de Coordenadas

```
       Z (para cima)
       â†‘
       |
       |_____ Y (lateral esquerda)
      /
     /
    X (para frente)

Origem: Centro do torso do G1
```

---

## ğŸ¤ Sistema de Garras

O G1 possui **garras paralelas de 2 dedos** em cada mÃ£o.

<Tabs>
<TabItem value="specs" label="EspecificaÃ§Ãµes">

### Garra Paralela

```
GARRA G1:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ Abertura mÃ¡xima: 120mm
â€¢ Abertura mÃ­nima: 0mm (fechada)
â€¢ ForÃ§a de preensÃ£o: 10-50N (ajustÃ¡vel)
â€¢ Sensores de forÃ§a: Sim (feedback tÃ¡til)
â€¢ Sensores de posiÃ§Ã£o: Encoders (resoluÃ§Ã£o 0.1mm)
```

**Capacidades:**
- âœ… Pegar objetos de 5mm a 120mm de largura
- âœ… Detectar escorregamento (slip detection)
- âœ… Ajuste automÃ¡tico de forÃ§a
- âŒ NÃ£o articula dedos individuais (limitaÃ§Ã£o)

</TabItem>

<TabItem value="control" label="Controle">

### Controlar Garra

```python
from unitree_sdk import G1Manipulator

manip = G1Manipulator()

# Abrir garra
manip.open_gripper(
    arm="left",           # "left" ou "right"
    width=100,            # mm (0-120)
    speed=50,             # mm/s
    force=20              # N (forÃ§a mÃ¡xima)
)

# Fechar atÃ© sentir objeto
manip.close_gripper(
    arm="right",
    force=15,             # N
    detect_object=True    # Para quando detecta objeto
)

# Verificar se estÃ¡ segurando algo
if manip.is_holding_object("right"):
    print("âœ… Objeto seguro!")
```

### Modos de PreensÃ£o

```python
# 1. FORCE CONTROL - Controlar forÃ§a
manip.set_gripper_mode("force")
manip.set_gripper_force("left", force=25)  # 25N constante

# 2. POSITION CONTROL - Controlar abertura
manip.set_gripper_mode("position")
manip.set_gripper_width("right", width=50)  # 50mm fixo

# 3. ADAPTIVE - Adaptar Ã  forma do objeto
manip.set_gripper_mode("adaptive")
manip.grasp_object("left")  # Ajusta automaticamente
```

</TabItem>

<TabItem value="examples" label="Exemplos">

### Pegar Objetos Comuns

```python
# Copo (cilÃ­ndrico)
manip.grasp_cylinder(
    arm="right",
    diameter=80,      # mm
    height=120,       # mm
    approach="top"    # ou "side"
)

# Caixa (prismÃ¡tica)
manip.grasp_box(
    arm="left",
    width=100,
    length=150,
    height=50,
    approach="top"
)

# Esfera (bola)
manip.grasp_sphere(
    arm="right",
    diameter=70,
    squeeze_force=30  # N
)

# Objeto irregular (genÃ©rico)
manip.grasp_object(
    arm="left",
    max_width=90,
    force=20,
    adaptive=True     # Ajusta Ã  forma
)
```

</TabItem>
</Tabs>

---

## ğŸ® Controle de PosiÃ§Ã£o dos BraÃ§os

### Forward Kinematics (FK)

**VocÃª especifica Ã¢ngulos das juntas â†’ G1 calcula posiÃ§Ã£o final**

```python
# Mover braÃ§o para pose especÃ­fica de juntas
joint_angles = {
    "shoulder_pitch": 30,   # graus
    "shoulder_roll": 15,
    "shoulder_yaw": 0,
    "elbow_pitch": 90,
    "wrist_pitch": 45,
    "wrist_roll": 0,
    "wrist_yaw": 0
}

manip.move_joints(
    arm="right",
    angles=joint_angles,
    speed=30,              # graus/s
    blocking=True          # Aguardar conclusÃ£o
)
```

### Inverse Kinematics (IK)

**VocÃª especifica posiÃ§Ã£o final â†’ G1 calcula Ã¢ngulos necessÃ¡rios**

```python
# Mover mÃ£o para coordenada XYZ
target_position = {
    "x": 0.4,   # 40cm Ã  frente
    "y": -0.2,  # 20cm para direita
    "z": 1.0    # 1m de altura
}

target_orientation = {
    "roll": 0,
    "pitch": 90,   # MÃ£o apontando para baixo
    "yaw": 0
}

manip.move_to_pose(
    arm="left",
    position=target_position,
    orientation=target_orientation,
    speed=0.2,            # m/s
    planning=True         # Evitar auto-colisÃ£o
)
```

### EspaÃ§o de Trabalho (Workspace)

```
ÃREA ALCANÃ‡ÃVEL (vista de cima):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        Frente (X+)
            â†‘
            |
    â”Œâ”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    /  |  \    â”‚  â† 0.65m raio
    â”‚   /   |   \   â”‚
    â”‚  /    |    \  â”‚
    â”‚ /     G1    \ â”‚
    â”‚/      â–ˆâ–ˆ     \â”‚
    â—â”€â”€â”€â”€â”€â”€â”€â–ˆâ–ˆâ”€â”€â”€â”€â”€â”€â—
     \      â–ˆâ–ˆ     /
      \     ||    /
       \    ||   /
        \   ||  /
         \  || /
          \ ||/
           \|/
            â—

Zona IDEAL: 0.3m - 0.5m Ã  frente
Zona LIMITE: atÃ© 0.65m
```

---

## ğŸ¯ Tarefas de ManipulaÃ§Ã£o

### Pegar e Colocar (Pick and Place)

<Tabs>
<TabItem value="basic" label="BÃ¡sico">

**SequÃªncia completa:**

```python
from unitree_sdk import G1Manipulator, G1Vision

manip = G1Manipulator()
vision = G1Vision()

# 1. DETECTAR OBJETO
objects = vision.detect_objects()
cup = vision.find_object_by_name("cup")

if not cup:
    print("âŒ Copo nÃ£o encontrado!")
    exit()

print(f"ğŸ“ Copo detectado em: {cup.position}")

# 2. APROXIMAR BRAÃ‡O
manip.move_to_pre_grasp(
    arm="right",
    target=cup.position,
    approach_distance=0.1  # Parar 10cm antes
)

# 3. ABRIR GARRA
manip.open_gripper("right", width=cup.diameter + 20)

# 4. APROXIMAR FINAL
manip.move_to_pose(
    arm="right",
    position=cup.position,
    speed=0.05  # Devagar!
)

# 5. FECHAR GARRA
manip.close_gripper("right", force=15)

# 6. VERIFICAR PREENSÃƒO
if not manip.is_holding_object("right"):
    print("âŒ Falha ao pegar copo!")
    manip.move_to_home("right")
    exit()

# 7. LEVANTAR OBJETO
manip.lift_object(
    arm="right",
    height=0.2,  # Subir 20cm
    speed=0.1
)

# 8. MOVER PARA DESTINO
destination = {"x": 0.3, "y": 0.2, "z": 1.0}
manip.move_to_pose("right", position=destination)

# 9. SOLTAR OBJETO
manip.place_object(
    arm="right",
    lower_distance=0.15,  # Descer 15cm
    release_force=5       # Abrir suavemente
)

# 10. RETRAIR BRAÃ‡O
manip.move_to_home("right")

print("âœ… Pick and place completo!")
```

</TabItem>

<TabItem value="advanced" label="AvanÃ§ado">

**Com tratamento de erros e replanejamento:**

```python
import time

def robust_pick_and_place(object_name, destination):
    max_attempts = 3

    for attempt in range(max_attempts):
        try:
            # Detectar objeto
            obj = vision.find_object_by_name(object_name)

            if not obj:
                print(f"âš ï¸ Tentativa {attempt+1}: Objeto nÃ£o encontrado")
                time.sleep(1)
                continue

            # Escolher melhor braÃ§o (mais prÃ³ximo)
            arm = manip.get_optimal_arm(obj.position)

            # Planejar trajetÃ³ria (evitar obstÃ¡culos)
            trajectory = manip.plan_trajectory(
                arm=arm,
                start=manip.get_current_pose(arm),
                goal=obj.position,
                avoid_obstacles=True
            )

            if not trajectory:
                print("âš ï¸ NÃ£o conseguiu planejar caminho livre")
                continue

            # Executar pick
            success = manip.execute_pick(
                arm=arm,
                trajectory=trajectory,
                object_properties=obj
            )

            if not success:
                print(f"âš ï¸ Tentativa {attempt+1}: Falha ao pegar")
                manip.move_to_home(arm)
                time.sleep(1)
                continue

            # Executar place
            success = manip.execute_place(
                arm=arm,
                destination=destination,
                release_height=0.05  # 5cm acima da superfÃ­cie
            )

            if success:
                print(f"âœ… Sucesso na tentativa {attempt+1}!")
                return True

        except Exception as e:
            print(f"âŒ Erro na tentativa {attempt+1}: {e}")
            manip.emergency_stop()
            time.sleep(2)

    print("âŒ Falha apÃ³s todas as tentativas")
    return False

# Usar
robust_pick_and_place("bottle", {"x": 0.5, "y": 0.0, "z": 0.8})
```

</TabItem>
</Tabs>

### ManipulaÃ§Ã£o Bimanual

**Coordenar ambos os braÃ§os simultaneamente:**

```python
# Pegar caixa grande (requer 2 mÃ£os)
box = vision.find_object_by_name("large_box")

# Calcular pontos de preensÃ£o
left_grasp = box.get_grasp_point("left_side")
right_grasp = box.get_grasp_point("right_side")

# COORDENAÃ‡ÃƒO SÃNCRONA
manip.bimanual_pick(
    left_target=left_grasp,
    right_target=right_grasp,
    sync=True,              # Mover ambos juntos
    force_left=30,
    force_right=30
)

# Mover caixa para nova posiÃ§Ã£o
manip.bimanual_move(
    left_destination={"x": 0.4, "y": 0.2, "z": 1.0},
    right_destination={"x": 0.4, "y": -0.2, "z": 1.0},
    maintain_orientation=True  # Manter caixa nivelada
)

# Colocar suavemente
manip.bimanual_place(
    lower_height=0.2,
    release_simultaneously=True
)
```

### OperaÃ§Ã£o de Ferramentas

```python
# Usar martelo (exemplo)
hammer = vision.find_object_by_name("hammer")

# Pegar pelo cabo
manip.grasp_tool(
    arm="right",
    tool=hammer,
    grip_point="handle",    # Especificar onde segurar
    orientation="vertical"
)

# Executar movimento de martelar
for i in range(5):
    manip.execute_motion(
        arm="right",
        motion_type="hammer",
        amplitude=0.2,      # 20cm de movimento
        frequency=2.0       # 2 Hz
    )
    time.sleep(0.5)

manip.release_tool("right")
```

---

## ğŸ›¡ï¸ SeguranÃ§a e Compliance

### DetecÃ§Ã£o de ColisÃ£o

```python
# Habilitar detecÃ§Ã£o de colisÃ£o
manip.enable_collision_detection(
    sensitivity=0.8,     # 0-1, quanto maior mais sensÃ­vel
    auto_stop=True,      # Parar imediatamente
    retract_on_collision=True  # Voltar apÃ³s colisÃ£o
)

# Definir zonas proibidas (keep-out zones)
manip.add_forbidden_zone(
    center={"x": 0.0, "y": 0.0, "z": 0.5},  # CabeÃ§a do G1
    radius=0.2,
    name="head_protection"
)
```

### Controle de ImpedÃ¢ncia

**Tornar braÃ§o "mole" para interaÃ§Ã£o humana segura:**

```python
# Modo colaborativo (human-friendly)
manip.set_compliance_mode(
    arm="left",
    stiffness=10,      # 0-100, quanto menor mais "mole"
    damping=30,        # Amortecimento
    inertia=5
)

# Agora vocÃª pode mover o braÃ§o manualmente!
# G1 nÃ£o resistirÃ¡, mas manterÃ¡ posiÃ§Ã£o aproximada

# Voltar ao modo rÃ­gido
manip.set_compliance_mode("left", stiffness=80)
```

### Limites de ForÃ§a

```python
# Configurar limites de seguranÃ§a
manip.set_force_limits(
    arm="right",
    max_force_cartesian=50,    # Newtons (forÃ§a na ponta)
    max_torque_joints=20        # Nm (torque nas juntas)
)

# Se exceder, G1 para automaticamente
manip.enable_force_monitoring(alert_threshold=0.8)
```

---

## ğŸ“Š CalibraÃ§Ã£o e PrecisÃ£o

### Calibrar BraÃ§o

```python
# CalibraÃ§Ã£o automÃ¡tica (recomendado fazer 1x por semana)
manip.calibrate_arm(
    arm="left",
    method="auto",          # ou "manual"
    reference="external"    # Usar marcadores externos
)

# Verificar precisÃ£o
accuracy = manip.test_accuracy(
    arm="right",
    num_samples=10
)

print(f"PrecisÃ£o mÃ©dia: {accuracy['mean_error']:.2f}mm")
print(f"Desvio padrÃ£o: {accuracy['std_error']:.2f}mm")

if accuracy['mean_error'] > 5:
    print("âš ï¸ PrecisÃ£o baixa! Recalibrar.")
```

### CompensaÃ§Ã£o de Carga

```python
# Informar sobre carga extra (ex: garra customizada)
manip.set_payload(
    arm="right",
    mass=0.5,              # kg
    center_of_mass=[0, 0, 0.1]  # metros do punho
)

# G1 ajusta controle automaticamente para compensar peso
```

---

## ğŸ’¡ Dicas de Uso

### Otimizar Velocidade vs PrecisÃ£o

```python
# RÃPIDO mas menos preciso (navegaÃ§Ã£o)
manip.set_motion_profile(
    speed=0.8,          # 80% velocidade mÃ¡xima
    acceleration=0.6,
    jerk=0.8,
    precision_mode=False
)

# DEVAGAR mas muito preciso (pick delicado)
manip.set_motion_profile(
    speed=0.2,
    acceleration=0.3,
    jerk=0.1,
    precision_mode=True
)
```

### Poses PrÃ©-Definidas

```python
# Poses Ãºteis (built-in)
manip.move_to_home("left")      # Neutro, braÃ§os ao lado
manip.move_to_ready("right")    # Pronto para pegar (Ã  frente)
manip.move_to_carry("left")     # Carregar objeto (perto do corpo)
manip.move_to_store("right")    # Guardar (braÃ§o retraÃ­do)

# Criar poses customizadas
manip.save_pose(
    name="my_custom_pose",
    arm="left",
    pose=manip.get_current_pose("left")
)

# Usar depois
manip.move_to_named_pose("left", "my_custom_pose")
```

---

## âœ… Checklist de PrÃ¡tica

- [ ] Abriu/fechou garra em diferentes larguras (20mm, 60mm, 120mm)
- [ ] Pegou objeto leve (< 500g) com sucesso
- [ ] Pegou objeto pesado (1-3 kg) com ajuste de forÃ§a
- [ ] Executou pick-and-place completo (5 vezes consecutivas)
- [ ] Usou ambos os braÃ§os sincronizados para pegar caixa
- [ ] Testou detecÃ§Ã£o de colisÃ£o (encostar no braÃ§o durante movimento)
- [ ] Moveu braÃ§o em modo compliance (manualmente)
- [ ] Calibrou braÃ§os e verificou precisÃ£o

---

## ğŸ› Troubleshooting Comum

| Problema | Causa | SoluÃ§Ã£o |
|----------|-------|---------|
| Garra nÃ£o fecha completamente | Objeto muito grosso | Verificar `max_width`, ajustar preensÃ£o |
| Objeto escorrega | ForÃ§a insuficiente | Aumentar `force` de 15N para 25-30N |
| BraÃ§o treme ao segurar peso | Carga nÃ£o declarada | Usar `set_payload()` para compensar |
| "IK failed" erro | PosiÃ§Ã£o fora do alcance | Verificar se destino estÃ¡ dentro de 0.65m |
| Movimento muito lento | Perfil conservador | Aumentar `speed` em `set_motion_profile()` |
| ColisÃ£o com prÃ³prio corpo | Falta de planejamento | Usar `planning=True` em `move_to_pose()` |

---

## ğŸ”— PrÃ³ximos Passos

:::tip PrÃ³ximo MÃ³dulo
**[ğŸ“¡ Sensores e PercepÃ§Ã£o â†’](./sensores-percepcao)**

Entenda como G1 "enxerga" o mundo: LIDAR, cÃ¢meras e sensores tÃ¡teis.
:::

---

**â±ï¸ Tempo:** 60-75 min | **ğŸ® Hands-on:** Essencial | **âš ï¸ Objetos:** Ter 3-5 objetos de tamanhos variados
