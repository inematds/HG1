---
sidebar_position: 9
title: 9. Troubleshooting
description: Resolver problemas comuns
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# üêõ Troubleshooting

:::tip Objetivo
Diagnosticar e resolver os problemas mais comuns do Unitree G1 de forma r√°pida e eficaz.
:::

---

## üîç Diagn√≥stico R√°pido

```python
from unitree_sdk import G1Diagnostics

diag = G1Diagnostics()

# Executar diagn√≥stico autom√°tico
report = diag.run_full_diagnostic()

for issue in report.issues:
    print(f"{issue.severity} [{issue.component}]: {issue.description}")
    print(f"  Solu√ß√£o: {issue.suggested_fix}\n")
```

---

## ‚ö° Problemas de Energia

### G1 N√£o Liga

<Tabs>
<TabItem value="battery" label="Bateria">

**Sintomas:** LED de power apagado, sem resposta

**Diagn√≥stico:**
```bash
# Verificar bateria com mult√≠metro
# Voltagem normal: 22-25V
# Voltagem cr√≠tica: < 18V
```

**Solu√ß√µes:**
1. Conectar carregador ‚Üí Aguardar 10 min ‚Üí Tentar ligar
2. Se LED vermelho pisca: Bateria em prote√ß√£o t√©rmica (aguardar esfriar)
3. Se nenhum LED: Bateria completamente descarregada (carregar 2-4h)
4. Verificar fus√≠vel interno (contatar suporte se queimado)

</TabItem>

<TabItem value="power" label="Bot√£o Power">

**Sintomas:** Bateria carregada mas G1 n√£o responde

**Solu√ß√µes:**
```python
# Reset de hardware
# 1. Manter bot√£o power pressionado por 15s
# 2. Soltar e aguardar 5s
# 3. Pressionar novamente (3s) para ligar

# Via software (se parcialmente responsivo)
diag.force_reboot(safe_mode=True)
```

</TabItem>
</Tabs>

---

## üö∂ Problemas de Locomo√ß√£o

### G1 N√£o Anda / Caminha Torto

| Sintoma | Causa Prov√°vel | Solu√ß√£o R√°pida |
|---------|----------------|----------------|
| N√£o sai do lugar | Modo errado | `g1.set_gait_mode("walk")` |
| Anda em c√≠rculos | IMU descalibrada | `g1.calibrate_imu()` em superf√≠cie plana |
| Trope√ßa frequentemente | Encoders desalinhados | `g1.calibrate_joint_encoders()` |
| Treme ao andar | Gains muito altos | `g1.tune_walking_parameters(stability="high")` |
| Para aleatoriamente | Sensores sujos | Limpar LIDAR + c√¢meras |

```python
# Diagn√≥stico de locomo√ß√£o
issues = diag.diagnose_locomotion()

if "imu_drift" in issues:
    print("Recalibrando IMU...")
    g1.calibrate_imu(duration=30)

if "uneven_gait" in issues:
    print("Ajustando par√¢metros de caminhada...")
    g1.auto_tune_gait()
```

---

## ü¶æ Problemas de Manipula√ß√£o

### Bra√ßo N√£o Se Move

```python
# Verificar estado dos motores do bra√ßo
arm_status = diag.check_arm_motors("right")

for motor, state in arm_status.items():
    if not state.enabled:
        print(f"Motor {motor} desabilitado: {state.reason}")

        # Tentar reabilitar
        if state.reason == "thermal_protection":
            print("Aguardando resfriamento...")
            time.sleep(300)  # 5 min
            g1.enable_motor(motor)

        elif state.reason == "emergency_stop":
            print("Liberando E-Stop...")
            g1.release_estop()
            g1.enable_motor(motor)
```

### Garra N√£o Fecha

**Checklist:**
```python
# 1. Verificar obstru√ß√£o
if manip.is_gripper_blocked("right"):
    print("Objeto preso na garra! Remover manualmente.")

# 2. Testar motor da garra
manip.test_gripper_motor("right")

# 3. Calibrar garra
manip.calibrate_gripper(
    arm="right",
    full_open_width=120,  # mm
    full_close_width=0
)

# 4. Verificar sensores de for√ßa
force = manip.get_gripper_force("right")
if force.sensor_error:
    print("Sensor de for√ßa com defeito!")
```

---

## üì° Problemas de Sensores

### LIDAR Sem Dados

```bash
# 1. Verificar conex√£o USB
lsusb | grep Ouster

# 2. Verificar permiss√µes
ls -l /dev/ttyUSB*

# 3. Reiniciar driver LIDAR
sudo systemctl restart unitree-lidar

# 4. Testar comunica√ß√£o
ros2 topic echo /scan --once
```

### C√¢mera com Imagem Preta

```python
# Diagn√≥stico de c√¢mera
camera_diag = diag.diagnose_camera("rgb_d")

if camera_diag.issue == "not_initialized":
    vision.initialize()
    vision.reset_camera()

elif camera_diag.issue == "low_light":
    vision.set_exposure(auto=True)
    vision.set_gain(auto=True)

elif camera_diag.issue == "driver_crashed":
    vision.restart_driver()
```

---

## üåê Problemas de Conectividade

### App N√£o Conecta ao G1

<Tabs>
<TabItem value="wifi" label="WiFi">

```python
# Verificar status WiFi
wifi = g1.get_wifi_status()
print(f"SSID: {wifi.ssid}")
print(f"Signal: {wifi.signal_strength}%")
print(f"IP: {wifi.ip_address}")

if wifi.signal_strength < 30:
    print("‚ö†Ô∏è Sinal fraco! Aproximar do router.")

# Recon ectar WiFi
g1.reconnect_wifi(
    ssid="MinhaRedeWiFi",
    password="senha123"
)
```

</TabItem>

<TabItem value="bluetooth" label="Bluetooth">

```python
# Reset Bluetooth
g1.reset_bluetooth()

# Listar dispositivos pareados
devices = g1.list_paired_devices()
for dev in devices:
    print(f"{dev.name}: {dev.mac_address}")

# Remover pareamentos antigos
g1.forget_all_devices()

# Parear novamente
g1.enable_pairing_mode(duration=60)  # 60s
```

</TabItem>
</Tabs>

---

## üî• Problemas de Superaquecimento

### Motores Muito Quentes

```python
# Monitorar temperaturas
temps = g1.get_motor_temperatures()

overheating = {k: v for k, v in temps.items() if v > 70}

if overheating:
    print(f"‚ö†Ô∏è Motores superaquecidos: {list(overheating.keys())}")

    # A√ß√£o imediata
    g1.enable_cooling_mode()
    g1.reduce_max_speed(factor=0.5)
    g1.limit_max_torque(percent=60)

    # Aguardar resfriamento
    while max(g1.get_motor_temperatures().values()) > 55:
        print(f"Resfriando... Max temp: {max(temps.values())}¬∞C")
        time.sleep(30)

    print("‚úÖ Temperatura normalizada")
```

**Preven√ß√£o:**
- Evitar uso cont√≠nuo > 2 horas sem pausa
- N√£o operar em ambiente > 30¬∞C
- Manter ventila√ß√£o adequada
- Reduzir carga se movimentos repetitivos

---

## üìä C√≥digos de Erro Comuns

| C√≥digo | Significado | Solu√ß√£o |
|--------|-------------|---------|
| E001 | Motor overload | Reduzir carga, verificar obstru√ß√£o |
| E002 | IMU calibration failed | Recalibrar em superf√≠cie plana est√°vel |
| E003 | Battery undervoltage | Carregar bateria imediatamente |
| E004 | Communication timeout | Verificar conex√µes, reiniciar sistema |
| E005 | Joint limit exceeded | Reset posi√ß√£o, verificar colis√£o |
| E010 | LIDAR error | Limpar sensor, verificar USB |
| E015 | Camera initialization failed | Reiniciar driver de c√¢mera |
| E020 | Emergency stop activated | Liberar E-Stop, verificar causa |
| E025 | Fall detected | Levantar G1 manualmente, verificar IMU |
| E030 | Thermal protection | Aguardar resfriamento (30+ min) |

```python
# Decodificar c√≥digo de erro
error_code = "E005"
error_info = diag.decode_error(error_code)

print(f"Erro: {error_info.description}")
print(f"Severidade: {error_info.severity}")
print(f"Solu√ß√£o: {error_info.solution}")
print(f"Documenta√ß√£o: {error_info.docs_url}")
```

---

## üîß Reset e Factory Restore

### Soft Reset (Preserva Dados)

```python
# Reset de software (mant√©m calibra√ß√µes)
g1.soft_reset(
    restart_services=True,
    clear_temp_files=True,
    keep_user_data=True
)
```

### Hard Reset (Limpa Tudo)

```python
# ATEN√á√ÉO: Apaga todas as configura√ß√µes!
g1.factory_reset(
    keep_calibrations=False,  # Perder calibra√ß√µes customizadas
    keep_maps=False,          # Perder mapas salvos
    keep_logs=True,           # Manter logs para diagn√≥stico
    confirm=True
)

# Ap√≥s factory reset:
# 1. Recalibrar IMU
# 2. Recalibrar encoders
# 3. Reconfigurar WiFi
# 4. Criar novos mapas
```

---

## üÜò Quando Contactar Suporte

**Contactar suporte Unitree se:**
- ‚úÖ Motor n√£o responde ap√≥s todos troubleshooting steps
- ‚úÖ Danos f√≠sicos vis√≠veis (rachaduras, pe√ßas quebradas)
- ‚úÖ Cheiro de queimado ou fuma√ßa
- ‚úÖ Erro E099 (erro cr√≠tico de hardware)
- ‚úÖ G1 caiu de altura > 50cm
- ‚úÖ L√≠quido derramado em componentes eletr√¥nicos

**Informa√ß√µes para fornecer:**
```python
# Gerar relat√≥rio de diagn√≥stico completo
support_report = diag.generate_support_report(
    include_logs=True,
    include_sensor_data=True,
    anonymize=False
)

# Salvar relat√≥rio
support_report.save("/tmp/g1_support_report.zip")

print(f"Enviar arquivo para: support@unitree.com")
print(f"Serial Number: {g1.get_serial_number()}")
```

---

## ‚úÖ Checklist de Troubleshooting

Antes de contactar suporte, verificar:

- [ ] Bateria carregada (> 20%)
- [ ] Todos os cabos conectados firmemente
- [ ] Sensores limpos (LIDAR, c√¢meras)
- [ ] Firmware atualizado para √∫ltima vers√£o
- [ ] IMU e encoders calibrados
- [ ] Soft reset executado
- [ ] Logs de erro revisados
- [ ] Tentou solu√ß√µes deste guia

---

## üîó Pr√≥ximos Passos

:::tip Pr√≥ximo M√≥dulo
**[üéÆ Exerc√≠cios Pr√°ticos ‚Üí](./exercicios-praticos)**

Teste seu conhecimento com desafios hands-on do G1!
:::

---

**‚è±Ô∏è Tempo:** 20-40 min | **üîß Ferramentas:** Mult√≠metro opcional | **üìã Nivel:** Intermedi√°rio
